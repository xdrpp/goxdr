# Go XDR compiler (goxdr)

goxdr compiles the [RFC4506] eXternal Data Representation IDL down to
go data structures.  goxdr has several features that together make it
an attractive alternative to other go XDR compilers for many
situations:

* Fully [RFC4506] compliant, including nested structure and union
  declarations.

* Output code is highly readable, with data structures segregated from
  messier marshaling code.  The generated go source is a convenient
  reference when programming with the data structures.  Autogenerated
  comments remind you of vector and string bounds as well as the
  mapping between union discriminants and bodies.

* The compiler copies godoc-formatted comments from the XDR source
  code into the generated go file.  If your XDR source is
  appropriately commented, the output will render nicely with godoc,
  providing self-contained documentation for libraries that include
  XDR types.

* Generated data types use the most natural go representations, such
  as arrays for arrays, slices for vectors, strings for strings.
  Union discriminants are ordinary fields, while arms (case
  statements) are methods that lazily allocate the necessary body
  based on the discriminant.  Unlike some approaches that waste memory
  by transforming unions into structs, memory is only required for one
  arm of a union at a time.

* String, vector, and variable opaque bounds are strictly enforced by
  generated marshaling functions, rather than being encoded in the
  types (which would make assignment annoying) or in struct field tags
  (which requires use of reflection and doesn't work for typedefs).

* You can generically traverse XDR data structures using simple
  interface methods.  Marshaling and traversal make no use of
  reflection, and hence avoid incurring the associated overhead and
  complexity.

* In addition to standard binary XDR serialization, generic traversal
  allows concise implementation of pretty printing, or extraction of
  all occurrences of a particular type at any level of struct/union
  nesting.  Traversal functions have access to field names.

* Traversal can special-case particular typdefs.  Even though typedefs
  are compiled to type aliases, their `XDR` functions return types
  that check for alias-name-specific marshaling methods that can
  differentiate treatment of identical go types.

* Tiny runtime package dependency is optional.  For small projects the
  compiler can instead emit boilerplate code directly into its output.

* An option to make comments on enum constants available at runtime
  allows you to specify things like human-readable error messages for
  error codes right in the source code of your XDR file, avoiding the
  need for manual synchronization between your XDR and go sources.

# Installation

To install goxdr outside of a go module, run:

    go get github.com/xdrpp/goxdr/cmd/goxdr

To install it from within a go module (i.e., below a directory with a
`go.mod` file), run:

    go get github.com/xdrpp/goxdr/cmd/goxdr@go1

# Documentation

The compiler's command-line usage and its generated code are both
detailed in the [goxdr(1)][goxdr.1] man page.

# Copyright and warranty disclaimer

goxdr is distributed with the `stc` module and subject to the
copyright and warranty disclaimers of the whole module.

[RFC4506]: https://tools.ietf.org/html/rfc4506
[RFC5531]: https://tools.ietf.org/html/rfc5531
[goxdr.1]: https://xdrpp.github.io/goxdr/pkg/github.com/xdrpp/goxdr/cmd/goxdr/goxdr.1.html
